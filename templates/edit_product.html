{% extends "base.html" %}
{% block content %}
<h1>עריכת מוצר</h1>
<form method="post" enctype="multipart/form-data">
    <div class="mb-3">
        <label for="name" class="form-label">שם המוצר</label>
        <input type="text" class="form-control" id="name" name="name" value="{{ product.name }}" required>
    </div>
    <div class="mb-3">
        <label for="description" class="form-label">תיאור</label>
        <textarea class="form-control" id="description" name="description" rows="3">{{ product.description }}</textarea>
    </div>
    <div class="mb-3">
        <label for="category" class="form-label">קטגוריה</label>
        <input type="text" class="form-control" id="category" name="category" value="{{ product.category }}">
    </div>
    <div class="mb-3">
        <label for="price" class="form-label">מחיר (₪)</label>
        <input type="number" step="0.01" class="form-control" id="price" name="price" value="{{ product.price }}" required>
    </div>
    <div class="mb-3">
        <label for="affiliate_link" class="form-label">קישור שותפים</label>
        <input type="url" class="form-control" id="affiliate_link" name="affiliate_link" value="{{ product.affiliate_link }}" required>
    </div>
    <div class="mb-3">
        <label for="tags" class="form-label">תגיות</label>
        <select class="form-control select2" id="tags" name="tags" multiple>
            <option value="אלקטרוניקה" {% if 'אלקטרוניקה' in product.tags %}selected{% endif %}>אלקטרוניקה</option>
            <option value="בית" {% if 'בית' in product.tags %}selected{% endif %}>בית</option>
            <option value="מבצע" {% if 'מבצע' in product.tags %}selected{% endif %}>מבצע</option>
            <option value="חדש" {% if 'חדש' in product.tags %}selected{% endif %}>חדש</option>
        </select>
    </div>
    <div class="mb-3">
        <label for="image_url" class="form-label">כתובת תמונה (URL)</label>
        <input type="url" class="form-control" id="image_url" name="image_url" value="{{ product.image_url }}">
    </div>
    <div class="mb-3">
        <label for="image_file" class="form-label">או העלה קובץ תמונה חדש</label>
        <input type="file" class="form-control" id="image_file" name="image_file" accept="image/*">
    </div>
    <button type="submit" class="btn btn-success">שמור</button>
    <a href="{{ url_for('products') }}" class="btn btn-secondary">ביטול</a>
</form>
{% endblock %}
{% block scripts %}
<script>
    $(document).ready(function() {
        $('.select2').select2({tags: true, tokenSeparators: [',', ' ']});
    });
</script>
{% endblock %}
